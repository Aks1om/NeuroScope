# NeuroScope

## Описание

`NeuroScope` — это гибкий бот, который:

* **Собирает** новости и данные из различных источников (web-скрейперы, RSS, API).
* **Обрабатывает** и **нормализует** их (удаляет дубликаты, парсит контент).
* **Фильтрует** с помощью SQL-запросов или ИИ-модулей.
* **Анализирует** (навешивает теги, оценивает тональность, извлекает ключевые слова).
* **Отправляет** отобранные и оформленные посты в Telegram-канал.
* Позволяет **редактировать** шаблоны публикаций через бота и публиковать в нужный канал.
* **Информирует** проггеров об ошибках и статусе через Telegram (список PROGGERS\_IDS).

## Ключевые особенности

* **Модульность**: логика разбита на слои и пакеты по ответственности.
* **Расширяемость**: легко добавить новые источники, фильтры, анализаторы или каналы.
* **Конфигурируемость**: все параметры — в `config.yml` и `.env`.
* **Логирование**: сообщения пишутся в консоль и (опционально) в Telegram.

## Архитектура

```text
┌───────────────────┐     ┌───────────────────┐
│  Data Collectors  │───▶│  Processing Layer │
│  (web_scraper,    │     │  ─ FilterEngine   │
│   drom_scraper,   │     │  ─ Analyzer       │
│   wallpaper, …)   │     └───────────────────┘
└───────────────────┘              │
                                   ▼
┌───────────────────┐     ┌───────────────────┐
│   Data Store      │◀───▶│  NewsService      │
│  DuckDBClient,    │     │ (оркестратор)     │
│  Repositories,    │     │                   │
│  Queries          │     └───────────────────┘
└───────────────────┘              │
                                   ▼
                         ┌───────────────────┐
                         │ Scheduler/Runner  │
                         │ (APScheduler,     │
                         │  cron, …)         │
                         └───────────────────┘
                                   │
                                   ▼
                         ┌───────────────────┐
                         │ Notifier Layer    │
                         │ (TelegramHandler) │
                         └───────────────────┘
```

### Слои и пакеты

* **`data/`** — управление DuckDB: `DuckDBClient`, репозитории, SQL-запросы.
* **`data_collector/`** — сбор данных из разных источников.
* **`processing/`** — фильтрация (`FilterEngine`), анализ (`Analyzer`).
* **`services/`** — `NewsService` объединяет сбор, обработку, хранение и отправку.
* **`scheduler/`** — запуск задач по расписанию (`run_scheduler`).
* **`logger/`** — настройка логирования в консоль и Telegram.
* **`utils/`** — конфиг, пути, общие утилиты.

## Установка и запуск

1. **Клонировать репозиторий**:

   ```bash
   git clone https://.../neuroscope.git
   cd neuroscope
   ```
2. **Создать виртуальное окружение** и установить зависимости:

   ```bash
   python -m venv venv
   source venv/bin/activate
   pip install -r requirements.txt
   ```
3. **Настроить**:

   * Переменные в `.env`: `TELEGRAM_API_TOKEN`, `TELEGRAM_CHAT_ID`, `PROGGERS_IDS`.
   * Параметры в `config.yml` (`sources`, `logging`, `scheduler`, `analyzer`).
4. **Запустить**:

   ```bash
   python main.py
   ```

## Конфигурация

* **`config.yml`** — основные настройки:

  * `logging.tg_log`: включить/отключить логи в Telegram.
  * `scheduler.interval`: период запуска сервисов.
  * `analyzer`: параметры ИИ-модулей (ключи, модели).

* **`.env`** — секреты и идентификаторы:

  ```dotenv
  TELEGRAM_API_TOKEN=...
  MODERATOR_CHAT_ID=...
  TARGET_..._CHANNEL_ID=@...
  PROG_IDS=...,...
  ```

## Логирование и обработка ошибок

* При возникновении ошибки **логгер** отправляет сообщение:

  * в консоль (всегда);
  * в Telegram (если `logging.tg_log: true`).
* Программисты (из `PROG_IDS`) получают уведомления об исключениях и критических событиях.

## Дальнейшее развитие

* Добавить поддержку SQL/NoSQL репозиториев.
* Интеграция с Dashboard для визуализации метрик.
* Модульная система плагинов для новых источников и каналов.

---